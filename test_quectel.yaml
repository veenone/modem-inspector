# Quectel EC200U Plugin Template
# Generated by Modem Inspector Plugin Generator
#
# This template includes all required sections and universal 3GPP commands.
# Customize the commands, add parsers, and update validation rules as needed.

# Plugin identification and versioning
metadata:
  vendor: "quectel"  # Vendor name (lowercase)
  model: "ec200u"    # Model identifier (lowercase)
  category: "lte_cat1"  # Category: 5g_highperf, lte_cat1, automotive, iot, nbiot, other
  version: "1.0.0"  # Semantic version (X.Y.Z)
  author: "Test Author"

# Serial connection configuration
connection:
  default_baud: 115200  # Baud rate (9600-921600)
  data_bits: 8      # Data bits (5-8)
  parity: "N"         # Parity: N=None, E=Even, O=Odd
  stop_bits: 1      # Stop bits (1-2)
  flow_control: false  # Hardware flow control (RTS/CTS)
  # Optional: Initialization sequence
  # init_sequence:
  #   - cmd: "ATE0"
  #     expected: "OK"

# AT command definitions organized by category
commands:
  # Basic commands
  basic:
    - cmd: 'AT'
      description: "Test command - verifies modem responsiveness"
      category: "basic"
      timeout: 5  # Override default timeout (seconds)
      critical: true  # Critical command (failure is significant)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+CGMI'
      description: "Request manufacturer identification"
      category: "basic"
      timeout: 5  # Override default timeout (seconds)
      critical: true  # Critical command (failure is significant)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+CGMM'
      description: "Request model identification"
      category: "basic"
      timeout: 5  # Override default timeout (seconds)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+CGMR'
      description: "Request revision identification (firmware version)"
      category: "basic"
      timeout: 5  # Override default timeout (seconds)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+CGSN'
      description: "Request IMEI (International Mobile Equipment Identity)"
      category: "basic"
      timeout: 5  # Override default timeout (seconds)
      quick: true  # Include in quick scan mode

  # Network commands
  network:
    - cmd: 'AT+CSQ'
      description: "Signal quality report"
      category: "network"
      timeout: 5  # Override default timeout (seconds)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+COPS?'
      description: "Operator selection (current network)"
      category: "network"
      timeout: 10  # Override default timeout (seconds)

    - cmd: 'AT+CREG?'
      description: "Network registration status"
      category: "network"
      timeout: 5  # Override default timeout (seconds)
      quick: true  # Include in quick scan mode

    - cmd: 'AT+QENG="servingcell"'
      description: "Query serving cell information (Quectel-specific)"
      category: "network"
      timeout: 10  # Override default timeout (seconds)

  # Power commands
  power:
    - cmd: 'AT+QTEMP'
      description: "Query temperature (Quectel-specific)"
      category: "power"
      timeout: 5  # Override default timeout (seconds)

# Response parsers for extracting structured data
# Uncomment and customize the examples below, or add your own parsers
#
# parsers:
#   # Example regex parser:
#   signal_parser:
#     name: "signal_parser"
#     type: "regex"
#     pattern: "\\+CSQ: (\\d+),(\\d+)"  # Escape backslashes in YAML
#     groups: ["rssi", "ber"]
#     output_format: "dict"
#
#   # Example JSON parser:
#   json_parser:
#     name: "json_parser"
#     type: "json"
#     json_path: "data.value"  # Optional path to extract
#
#   # Example custom parser:
#   custom_parser:
#     name: "custom_parser"
#     type: "custom"
#     module: "parsers.custom.my_parser"  # Python module path
#     function: "parse_response"          # Function name in module

# Validation rules for plugin testing
validation:
  required_responses:
    - "AT"  # Command that must succeed
  # Optional: Expected manufacturer string from AT+CGMI
  # expected_manufacturer: "Quectel"
  # Optional: Regex pattern for expected model from AT+CGMM
  # expected_model_pattern: "EC200U.*"
